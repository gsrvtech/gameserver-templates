{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PANEL",
    "meta": {
        "version": "PLCN_v2",
        "update_url": null
    },
    "exported_at": "2025-09-28T10:14:29+00:00",
    "name": "Space Engineers - Torch Server",
    "author": "info@goover.de",
    "uuid": "502e2018-30ab-4cd4-8f95-fcbe58935c28",
    "description": "Torch is the successor to SE Server Extender and gives server admins the tools they need to keep their Space Engineers servers running smoothly. It features a user interface with live management tools and a plugin system so you can run your server exactly how you'd like. Torch is still in early development so there may be bugs and incomplete features.\r\n\r\n!!!!! DO NOT CANCEL THE FIRST START, OR YOU NEED TO DELETE THE SERVER AND CREATE FROM SCRATCH !!!!",
    "tags": [
        "goover.dev"
    ],
    "features": [
        "steam_disk_space"
    ],
    "docker_images": {
        "ghcr.io/goover/wine:staging": "ghcr.io/goover/wine:staging"
    },
    "file_denylist": [],
    "startup": "export WINEDLLOVERRIDES=\"mscoree=n,b;mshtml=n,b\"; wine /home/container/Torch.Server.exe -noupdate -nogui -console",
    "config": {
        "files": "{\n    \"Instance\\/SpaceEngineers-Dedicated.cfg\": {\n        \"parser\": \"xml\",\n        \"find\": {\n            \"MyConfigDedicated.SessionSettings.GameMode\": \"{{server.environment.SERVER_MODE}}\",\n            \"MyConfigDedicated.SessionSettings.MaxPlayers\": \"{{server.environment.MAX_PLAYERS}}\",\n            \"MyConfigDedicated.SessionSettings.AutoSaveInMinutes\": \"{{server.environment.SAVE_INTERVAL}}\",\n            \"MyConfigDedicated.SessionSettings.EnableSaving\": \"{{server.environment.SAVE_ENABLED}}\",\n            \"MyConfigDedicated.LoadWorld\": \"Z:\\\\home\\\\container\\\\Instance\\\\Saves\\\\{{server.environment.WORLD_NAME}}\",\n            \"MyConfigDedicated.ServerPort\": \"{{server.allocations.default.port}}\",\n            \"MyConfigDedicated.SteamPort\": \"{{server.environment.STEAM_PORT}}\",\n            \"MyConfigDedicated.ServerName\": \"{{server.environment.SERVER_NAME}}\",\n            \"MyConfigDedicated.WorldName\": \"{{server.environment.WORLD_NAME}}\",\n            \"MyConfigDedicated.ServerDescription\": \"{{server.environment.SERVER_DESC}}\",\n            \"MyConfigDedicated.RemoteApiEnabled\": \"{{server.environment.REMOTEAPI_ENABLE}}\",\n            \"MyConfigDedicated.RemoteApiPort\": \"{{server.environment.REMOTEAPI_PORT}}\"\n        }\n    },\n    \"config\\/Saves\\/World\\/Sandbox.sbc\": {\n        \"parser\": \"xml\",\n        \"find\": {\n            \"MyConfigDedicated.SessionSettings.GameMode\": \"{{server.environment.SERVER_MODE}}\",\n            \"MyConfigDedicated.SessionSettings.MaxPlayers\": \"{{server.environment.MAX_PLAYERS}}\",\n            \"MyConfigDedicated.SessionSettings.AutoSaveInMinutes\": \"{{server.environment.SAVE_INTERVAL}}\",\n            \"MyConfigDedicated.SessionSettings.EnableSaving\": \"{{server.environment.SAVE_ENABLED}}\"\n        }\n    }\n}",
        "startup": "{\n    \"done\": \"Game ready...\"\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\r\n# ------------------------------------------------\r\n# Generic Installscript Template for Pelican Eggs (Linux)\r\n# License: AGPLv3\r\n# Author: gOOvER (https://discord.goover.dev)\r\n# Donate: https://donate.goover.dev\r\n# ------------------------------------------------\r\n\r\n# ----------------------------\r\n# Environment Setup\r\n# ----------------------------\r\nHOME=/mnt/server\r\nexport HOME\r\n\r\n# Ensure /mnt is owned by root\r\nchown -R root:root /mnt\r\n\r\nGAME_NAME=\"SpaceEngineers - Torch\"   # <--- name of the game (internal placeholder)\r\nCONFIG_FILE_NAME=\"SpaceEngineers-Dedicated.cfg\"      # <--- configurable config filename (internal)\r\nCONFIG_DIR=\"$HOME/Instance\" # <--- adjustable per game\r\nCONFIG_URL=\"https://raw.githubusercontent.com/gsrvtech/gameserver-templates/refs/heads/main/steamcmd-games/spaceengineers/vanilla/config/SpaceEngineers-Dedicated.cfg\"                  # <--- adjustable per game\r\nWORLD_DLURL=\"https://raw.githubusercontent.com/gsrvtech/gameserver-templates/main/steamcmd-games/spaceengineers/vanilla/config/world.7z\"\r\nSTEAMCMD_DIR=\"$HOME/steamcmd\"              # <--- SteamCMD directory\r\n\r\nSTEAM_USER=\"${STEAM_USER:-anonymous}\"\r\nSTEAM_PASS=\"${STEAM_PASS:-}\"\r\nSTEAM_AUTH=\"${STEAM_AUTH:-}\"\r\nDEPOTDOWNLOADER=\"${DEPOTDOWNLOADER:-0}\"\r\n: \"${STEAM_APPID:?Environment variable STEAM_APPID must be set for $GAME_NAME}\"  # mandatory\r\n\r\n# ----------------------------\r\n# Locale Setup to suppress warnings\r\n# ----------------------------\r\nexport LANG=en_US.UTF-8\r\nexport LANGUAGE=en_US:en\r\nexport LC_ALL=en_US.UTF-8\r\n\r\n# ----------------------------\r\n# Logging Setup\r\n# ----------------------------\r\nSAFE_NAME=\"${GAME_NAME// /_}_install.log\"\r\nINSTALL_LOG=\"$HOME/$SAFE_NAME\"\r\n\r\n# Redirect all output to log while still mirroring to console\r\nif command -v tee >/dev/null 2>&1; then\r\n    exec 3>&1\r\n    exec > >(tee -a \"$INSTALL_LOG\" >&3) 2> >(tee -a \"$INSTALL_LOG\" >&2)\r\nelse\r\n    exec > \"$INSTALL_LOG\" 2>&1\r\nfi\r\n\r\n# ----------------------------\r\n# Colors\r\n# ----------------------------\r\nRED=$(tput setaf 1)\r\nGREEN=$(tput setaf 2)\r\nYELLOW=$(tput setaf 3)\r\nBLUE=$(tput setaf 4)\r\nCYAN=$(tput setaf 6)\r\nNC=$(tput sgr0)\r\n\r\nLINE=\"${BLUE}-------------------------------------------------${NC}\"\r\n\r\n# ----------------------------\r\n# Logging Functions\r\n# ----------------------------\r\nlog_info()    { echo \"${BLUE}[INFO]${NC} $*\"; }\r\nlog_warn()    { echo \"${YELLOW}[WARN]${NC} $*\"; }\r\nlog_error()   { echo \"${RED}[ERROR]${NC} $*\" >&2; }\r\nlog_success() { echo \"${GREEN}[ OK ]${NC} $*\"; }\r\n\r\n# ----------------------------\r\n# Safe command execution\r\n# ----------------------------\r\nrun_or_fail() {\r\n    local desc=\"$1\"; shift\r\n    if \"$@\"; then\r\n        log_success \"$desc\"\r\n    else\r\n        log_error \"$desc failed!\"\r\n        exit 1\r\n    fi\r\n}\r\n\r\n# ----------------------------\r\n# Start Script Output\r\n# ----------------------------\r\nclear\r\nlog_info \"$LINE\"\r\nlog_info \"${YELLOW}$GAME_NAME Installscript${NC}\"\r\nlog_info \"$LINE\"\r\n\r\nif [ \"$STEAM_USER\" = \"anonymous\" ]; then\r\n    log_warn \"Using anonymous Steam login for $GAME_NAME.\"\r\nelse\r\n    log_info \"Using Steam user: $STEAM_USER for $GAME_NAME.\"\r\nfi\r\n\r\n# ----------------------------\r\n# Game Installation via DepotDownloader\r\n# ----------------------------\r\nif [ \"$DEPOTDOWNLOADER\" = \"1\" ]; then\r\n    log_info \"Installing $GAME_NAME via DepotDownloader (Linux)...\"\r\n    mkdir -p \"$HOME/depotdownloader\"\r\n    cd \"$HOME/depotdownloader\"\r\n\r\n    if [ ! -f DepotDownloader ]; then\r\n        log_info \"Fetching DepotDownloader Linux binary...\"\r\n        run_or_fail \"Download DepotDownloader\" curl -sSL -o DepotDownloader https://github.com/SteamRE/DepotDownloader/releases/latest/download/DepotDownloader-Linux-x64\r\n        run_or_fail \"Make DepotDownloader executable\" chmod +x DepotDownloader\r\n    fi\r\n\r\n    log_info \"Running DepotDownloader...\"\r\n    ./DepotDownloader \\\r\n        -app $STEAM_APPID \\\r\n        -dir $HOME \\\r\n        $( [[ -n \"${STEAM_BETAID:-}\" ]] && printf %s \"-beta $STEAM_BETAID\" ) \\\r\n        $( [[ -n \"${STEAM_BETAPASS:-}\" ]] && printf %s \"-betapassword $STEAM_BETAPASS\" ) \\\r\n        ${INSTALL_FLAGS:-} \\\r\n        -username $STEAM_USER \\\r\n        -password $STEAM_PASS \\\r\n        ${STEAM_AUTH:+-remember-password $STEAM_AUTH} || \\\r\n        log_warn \"DepotDownloader returned non-zero exit code, but installation may still be OK.\"\r\n    log_success \"DepotDownloader installation finished.\"\r\nfi\r\n\r\n# ----------------------------\r\n# Game Installation via SteamCMD\r\n# ----------------------------\r\nif [ \"$DEPOTDOWNLOADER\" != \"1\" ]; then\r\n    log_info \"Installing $GAME_NAME via SteamCMD...\"\r\n    mkdir -p \"$STEAMCMD_DIR\" \"$HOME/steamapps\"\r\n\r\n    run_or_fail \"Download SteamCMD\" curl -sSL -o /tmp/steamcmd.tar.gz https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz\r\n    run_or_fail \"Extract SteamCMD\" tar -xzvf /tmp/steamcmd.tar.gz -C \"$STEAMCMD_DIR\"\r\n\r\n    cd \"$STEAMCMD_DIR\"\r\n\r\n    log_info \"Running SteamCMD...\"\r\n    ./steamcmd.sh +force_install_dir $HOME \\\r\n        +login $STEAM_USER $STEAM_PASS $STEAM_AUTH \\\r\n        $( [[ \"${WINDOWS_INSTALL:-0}\" == \"1\" ]] && printf %s '+@sSteamCmdForcePlatformType windows' ) \\\r\n        $( [[ \"${STEAM_SDK:-0}\" == \"1\" ]] && printf %s '+app_update 1007' ) \\\r\n        +app_update $STEAM_APPID \\\r\n        $( [[ -n \"${STEAM_BETAID:-}\" ]] && printf %s \"-beta $STEAM_BETAID\" ) \\\r\n        $( [[ -n \"${STEAM_BETAPASS:-}\" ]] && printf %s \"-betapassword $STEAM_BETAPASS\" ) \\\r\n        ${INSTALL_FLAGS:-} validate +quit || \\\r\n        log_warn \"SteamCMD returned a non-zero exit code, but installation may still be OK.\"\r\n    log_success \"SteamCMD installation finished.\"\r\nfi\r\n\r\n# ----------------------------\r\n# Steam Libraries Setup\r\n# ----------------------------\r\nlog_info \"Setting up Steam libraries...\"\r\nmkdir -p \"$HOME/.steam/sdk32\" \"$HOME/.steam/sdk64\"\r\ncp -v \"$STEAMCMD_DIR/linux32/steamclient.so\" \"$HOME/.steam/sdk32/steamclient.so\" || true\r\ncp -v \"$STEAMCMD_DIR/linux64/steamclient.so\" \"$HOME/.steam/sdk64/steamclient.so\" || true\r\nlog_success \"Steam libraries setup complete.\"\r\n\r\n# ----------------------------\r\n# Game-specific Hooks\r\n# ----------------------------\r\nlog_info \"Executing $GAME_NAME game-specific hooks...\"\r\n## Download Torch and unpack\r\ncd $HOME\r\ncurl -sSL -o torch-server.zip https://build.torchapi.com/job/Torch/job/master/lastSuccessfulBuild/artifact/bin/torch-server.zip\r\nunzip -o torch-server.zip -d /mnt/server/\r\nrm -fR $HOME/torch-server.zip\r\n\r\n## Create world and Instance\r\nmkdir -p $HOME/Instance/Saves\r\nif [ ! -d $HOME/Instance/Saves/World ]\r\nthen\r\n    OUTPUT=\"world.7z\"\r\n    curl -fSL \"$WORLD_DLURL\" -o \"$OUTPUT\"\r\n    if [[ ! -s \"$OUTPUT\" ]]; then\r\n        log_warn \"Error: Download failed or file is empty.\"\r\n        exit 1\r\n    fi\r\n    if file \"$OUTPUT\" | grep -q \"7-zip archive\"; then\r\n        log_success \"File appears to be a valid 7z archive.\"\r\n    else\r\n        log_warn \"Warning: File does not look like a valid 7z archive.\"\r\n    fi\r\n    7zz x world.7z -aoa -mmt=off -o/$HOME/Instance/Saves/\r\nfi\r\n\r\n# ----------------------------\r\n# Config Setup\r\n# ----------------------------\r\nif [ -f \"$CONFIG_DIR/$CONFIG_FILE_NAME\" ]; then\r\n    log_success \"$GAME_NAME $CONFIG_FILE_NAME found.\"\r\nelse\r\n    log_warn \"$GAME_NAME $CONFIG_FILE_NAME not found. Fetching default...\"\r\n    mkdir -p \"$CONFIG_DIR\"\r\n    run_or_fail \"Download default $CONFIG_FILE_NAME\" curl -sSL -o \"$CONFIG_DIR/$CONFIG_FILE_NAME\" \"$CONFIG_URL\"\r\nfi\r\n\r\n# ----------------------------\r\n# Done\r\n# ----------------------------\r\nlog_info \"$LINE\"\r\nlog_success \"$GAME_NAME installation completed successfully.\"\r\nlog_info \"$LINE\"\r\n",
            "container": "ghcr.io/goover/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "sort": 6,
            "name": "Maximum Players",
            "description": "",
            "env_variable": "MAX_PLAYERS",
            "default_value": "4",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "numeric",
                "digits_between:1,3"
            ]
        },
        {
            "sort": 10,
            "name": "Enable Remote API",
            "description": "Enable Remote API",
            "env_variable": "REMOTEAPI_ENABLE",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string",
                "in:true,false"
            ]
        },
        {
            "sort": 11,
            "name": "Remote API Port",
            "description": "Remote API Port",
            "env_variable": "REMOTEAPI_PORT",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "numeric",
                "max:65535"
            ]
        },
        {
            "sort": 7,
            "name": "Enable Saving",
            "description": "",
            "env_variable": "SAVE_ENABLED",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string",
                "in:true,false"
            ]
        },
        {
            "sort": 8,
            "name": "Auto Save Interval",
            "description": "Time between auto saves specified in minutes",
            "env_variable": "SAVE_INTERVAL",
            "default_value": "5",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "numeric",
                "digits_between:1,3"
            ]
        },
        {
            "sort": 4,
            "name": "Server Description",
            "description": "Description of the game",
            "env_variable": "SERVER_DESC",
            "default_value": "A Pterodactyl hosted Space Engineer Server",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string",
                "max:200"
            ]
        },
        {
            "sort": 5,
            "name": "Game Mode",
            "description": "Game Mode setting: Survival, Creative",
            "env_variable": "SERVER_MODE",
            "default_value": "Survival",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string",
                "in:Survival,Creative"
            ]
        },
        {
            "sort": 2,
            "name": "[SERVER] Server Name",
            "description": "Name of the server, appears in Steam browser.",
            "env_variable": "SERVER_NAME",
            "default_value": "Torch Space Engineer Server - discord.goover.dev",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string",
                "max:64"
            ]
        },
        {
            "sort": 1,
            "name": "[STEAM] Steam APPID",
            "description": "The ID corresponding to the game to download.",
            "env_variable": "STEAM_APPID",
            "default_value": "298740",
            "user_viewable": false,
            "user_editable": false,
            "rules": [
                "required",
                "numeric"
            ]
        },
        {
            "sort": 9,
            "name": "Steam Port",
            "description": "Steam Port",
            "env_variable": "STEAM_PORT",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "numeric"
            ]
        },
        {
            "sort": 13,
            "name": "WINDOWS_INSTALL",
            "description": "",
            "env_variable": "WINDOWS_INSTALL",
            "default_value": "1",
            "user_viewable": false,
            "user_editable": false,
            "rules": [
                "required",
                "boolean"
            ]
        },
        {
            "sort": 14,
            "name": "WINEDEBUG",
            "description": "",
            "env_variable": "WINEDEBUG",
            "default_value": "-all",
            "user_viewable": false,
            "user_editable": false,
            "rules": [
                "required",
                "string",
                "max:20"
            ]
        },
        {
            "sort": 12,
            "name": "WINETRICKS_RUN",
            "description": "",
            "env_variable": "WINETRICKS_RUN",
            "default_value": "vcrun2013 vcrun2017 corefonts dotnet48",
            "user_viewable": false,
            "user_editable": false,
            "rules": [
                "required",
                "string"
            ]
        },
        {
            "sort": 3,
            "name": "World Name",
            "description": "Name of your world (and of your save folder) DO NOT CHANGE THIS !!!!",
            "env_variable": "WORLD_NAME",
            "default_value": "World",
            "user_viewable": true,
            "user_editable": false,
            "rules": [
                "required",
                "string",
                "max:20"
            ]
        },
        {
            "sort": 15,
            "name": "XVFB",
            "description": "",
            "env_variable": "XVFB",
            "default_value": "1",
            "user_viewable": false,
            "user_editable": false,
            "rules": [
                "required",
                "boolean"
            ]
        }
    ]
}