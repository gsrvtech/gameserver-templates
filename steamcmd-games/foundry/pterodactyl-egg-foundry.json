{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2025-08-18T13:22:14+00:00",
    "name": "Foundry",
    "author": "eggs@goover.dev",
    "description": "Build a factory optimized to perfection or an artistic masterpiece in an infinite voxel world. Mine and harvest resources, automate your ever-growing production lines and manage complex systems while researching your way to mechanical mastery in FOUNDRY.",
    "tags": [],
    "features": [
        "steam_disk_space"
    ],
    "docker_images": {
        "ghcr.io\/goover\/wine:staging": "ghcr.io\/goover\/wine:staging"
    },
    "file_denylist": [],
    "startup": "wine .\/FoundryDedicatedServer.exe -log",
    "config": {
        "files": "{\n    \"App.cfg\": {\n        \"parser\": \"properties\",\n        \"find\": {\n            \"server_name\": \"{{server.build.env.SERVER_NAME}}\",\n            \"server_password\": \"{{server.build.env.SRV_PW}}\",\n            \"server_world_name\": \"{{server.build.env.WORLD_NAME}}\",\n            \"server_max_players\": \"{{server.build.env.MAX_PLAYERS}}\",\n            \"server_port\": \"{{server.build.default.port}}\",\n            \"server_query_port\": \"{{server.build.env.QUERY_PORT}}\",\n            \"pause_server_when_empty\": \"{{server.build.env.PAUSE_SERVER}}\",\n            \"autosave_interval\": \"{{server.build.env.AUTOSAVE_INTERVAL}}\",\n            \"server_is_public\": \"{{server.build.env.PUBLIC_SERVER}}\",\n            \"server_persistent_data_override_folder\": \"{{server.build.env.SAVE_PATH}}\",\n            \"map_seed\": \"{{server.build.env.MAP_SEED}}\",\n            \"max_transfer_rate\": \"{{server.build.env.MAX_TRANSFER}}\"\n        }\n    }\n}",
        "startup": "{\n    \"done\": \"Dedicated server is now running!\"\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n# THIS EGG IS LICENSED UNDER AGPLv3\r\n\r\nset -euo pipefail\r\n\r\n# --- Colors ---\r\nRED=$(tput setaf 1)\r\nGREEN=$(tput setaf 2)\r\nYELLOW=$(tput setaf 3)\r\nBLUE=$(tput setaf 4)\r\nNC=$(tput sgr0)\r\n\r\n# --- Logging functions ---\r\nlog_info()    { echo \"${BLUE}[INFO]${NC} $*\"; }\r\nlog_warn()    { echo \"${YELLOW}[WARN]${NC} $*\"; }\r\nlog_error()   { echo \"${RED}[ERROR]${NC} $*\" >&2; }\r\nlog_success() { echo \"${GREEN}[ OK ]${NC} $*\"; }\r\n\r\n# --- Helper for running commands safely ---\r\nrun_or_fail() {\r\n    local desc=\"$1\"; shift\r\n    if \"$@\"; then\r\n        log_success \"$desc\"\r\n    else\r\n        log_error \"$desc failed!\"\r\n        exit 1\r\n    fi\r\n}\r\n\r\n# --- Header ---\r\nprint_header() {\r\n    clear\r\n    echo \"${BLUE}----------------------------------------------------------------${NC}\"\r\n    echo \"${YELLOW}${GAMENAME} Installation Script${NC}\"\r\n    echo \"${YELLOW}Egg by gOOvER (https:\/\/discord.goover.dev) | License: AGPLv3${NC}\"\r\n    echo \"${YELLOW}This EGG is Licenced under AGPLv3${NC}\"\r\n    echo \"${BLUE}----------------------------------------------------------------${NC}\"\r\n}\r\n\r\n# --- Config ---\r\nGAMENAME=\"Foundry\"\r\n# --- Set to 1, if you want to use DepotDownloader insteed steamcmd\r\nDEPOTDOWNLOADER=0\r\n\r\nmkdir -p \/mnt\/server\r\nchown -R root:root \/mnt\r\nexport HOME=\/mnt\/server\r\n\r\nSTEAM_USER=\"${STEAM_USER:-anonymous}\"\r\nSTEAM_PASS=\"${STEAM_PASS:-}\"\r\nSTEAM_AUTH=\"${STEAM_AUTH:-}\"\r\n\r\nprint_header\r\n\r\nif [[ -z \"${STEAM_APPID:-}\" ]]; then\r\n    log_error \"STEAM_APPID is not set!\"\r\n    exit 1\r\nfi\r\n\r\nif [[ \"$STEAM_USER\" == \"anonymous\" ]]; then\r\n    log_info \"Using anonymous Steam login\"\r\nfi\r\n\r\n# --- DepotDownloader installation ---\r\nif [[ \"$DEPOTDOWNLOADER\" == \"1\" ]]; then\r\n    log_info \"Installing game using DepotDownloader...\"\r\n    cd \"$HOME\"\r\n\r\n    LATEST_RELEASE=$(curl -s https:\/\/api.github.com\/repos\/SteamRE\/DepotDownloader\/releases\/latest \\\r\n        | grep browser_download_url \\\r\n        | cut -d'\"' -f4 \\\r\n        | grep linux-x64.zip)\r\n\r\n    run_or_fail \"Download DepotDownloader\" curl -sLOJ \"$LATEST_RELEASE\"\r\n    run_or_fail \"Extract DepotDownloader\" unzip -o DepotDownloader-linux-x64.zip -d \/mnt\/server\r\n    chmod +x \/mnt\/server\/DepotDownloader\r\n\r\n    DOWNLOADER_ARGS=(-dir \"\/mnt\/server\" -app \"$STEAM_APPID\" -validate)\r\n\r\n    [[ \"$STEAM_USER\" != \"anonymous\" ]] && DOWNLOADER_ARGS+=(-username \"$STEAM_USER\" -password \"$STEAM_PASS\" -remember-password)\r\n    [[ \"${WINDOWS_INSTALL:-0}\" == \"1\" ]] && DOWNLOADER_ARGS+=(-os windows)\r\n    [[ -n \"${STEAM_BETAID:-}\" ]] && DOWNLOADER_ARGS+=(-beta \"$STEAM_BETAID\")\r\n    [[ -n \"${STEAM_BETAPASS:-}\" ]] && DOWNLOADER_ARGS+=(-betapassword \"$STEAM_BETAPASS\")\r\n\r\n    run_or_fail \"Download game files\" .\/DepotDownloader \"${DOWNLOADER_ARGS[@]}\"\r\n\r\n    mkdir -p \/mnt\/server\/.steam\/sdk64\r\n    run_or_fail \"Download Steam SDK\" .\/DepotDownloader -dir \"\/mnt\/server\/.steam\/sdk64\" -app 1007\r\n\r\n# --- SteamCMD installation ---\r\nelse\r\n    log_info \"Installing game using SteamCMD...\"\r\n    mkdir -p \/mnt\/server\/steamcmd \/mnt\/server\/steamapps\r\n    cd \/mnt\/server\/steamcmd\r\n\r\n    run_or_fail \"Download SteamCMD\" curl -sSL -o steamcmd.tar.gz https:\/\/steamcdn-a.akamaihd.net\/client\/installer\/steamcmd_linux.tar.gz\r\n    run_or_fail \"Extract SteamCMD\" tar -xzf steamcmd.tar.gz\r\n\r\n    STEAMCMD_ARGS=(+force_install_dir \"\/mnt\/server\" +login \"$STEAM_USER\" \"$STEAM_PASS\" \"$STEAM_AUTH\" +app_update \"$STEAM_APPID\" validate +quit)\r\n\r\n    [[ \"${WINDOWS_INSTALL:-0}\" == \"1\" ]] && STEAMCMD_ARGS=(+@sSteamCmdForcePlatformType windows \"${STEAMCMD_ARGS[@]}\")\r\n    [[ \"${STEAM_SDK:-0}\" == \"1\" ]] && STEAMCMD_ARGS=(+app_update 1007 \"${STEAMCMD_ARGS[@]}\")\r\n    [[ -n \"${STEAM_BETAID:-}\" ]] && STEAMCMD_ARGS+=(-beta \"$STEAM_BETAID\")\r\n    [[ -n \"${STEAM_BETAPASS:-}\" ]] && STEAMCMD_ARGS+=(-betapassword \"$STEAM_BETAPASS\")\r\n    [[ -n \"${INSTALL_FLAGS:-}\" ]] && STEAMCMD_ARGS+=($INSTALL_FLAGS)\r\n\r\n    run_or_fail \"Install game via SteamCMD\" .\/steamcmd.sh \"${STEAMCMD_ARGS[@]}\"\r\n\r\n    mkdir -p \/mnt\/server\/.steam\/sdk32 \/mnt\/server\/.steam\/sdk64\r\n    cp -v linux32\/steamclient.so ..\/.steam\/sdk32\/\r\n    cp -v linux64\/steamclient.so ..\/.steam\/sdk64\/\r\nfi\r\n\r\necho \"${BLUE}-------------------------------------------------${NC}\"\r\nlog_success \"Installation completed successfully\"\r\necho \"${BLUE}-------------------------------------------------${NC}\"\r\n",
            "container": "ghcr.io\/goover\/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Savepath",
            "description": "",
            "env_variable": "SAVE_PATH",
            "default_value": "\/home\/container\/serverfiles",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "WINDOWS_INSTALL",
            "description": "",
            "env_variable": "WINDOWS_INSTALL",
            "default_value": "1",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|in:1",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Autosave Interval",
            "description": "Sets the autosave frequency in seconds.",
            "env_variable": "AUTOSAVE_INTERVAL",
            "default_value": "300",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|numeric",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Map Seed",
            "description": "Sets the map seed used to generate the world.",
            "env_variable": "MAP_SEED",
            "default_value": "42938743982",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|numeric",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Max Transfer Rate",
            "description": "",
            "env_variable": "MAX_TRANSFER",
            "default_value": "1024",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|between:1024,8192",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Pause Server When Empty",
            "description": "Will the server pause when nobody is connected.",
            "env_variable": "PAUSE_SERVER",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Server Max Players",
            "description": "This sets the max amount of players on a server.",
            "env_variable": "MAX_PLAYERS",
            "default_value": "32",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|numeric",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Server Name",
            "description": "This is the name of the server listed in the Steam server browser.",
            "env_variable": "SERVER_NAME",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:40",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Server Password",
            "description": "Sets the server password.",
            "env_variable": "SRV_PW",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:20",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Server Public",
            "description": "Sets whether the server is listed on the Steam server browser.",
            "env_variable": "PUBLIC_SERVER",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Server World Name",
            "description": "Sets the server world name. This is the folder where the save files will be stored.",
            "env_variable": "WORLD_NAME",
            "default_value": "ServerWorld",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "[SERVER] Steam Query Port",
            "description": "Sets the network port used by the Steam server browser to query information about the game. This is only used if the server is set to public.",
            "env_variable": "QUERY_PORT",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|between:1024,65536",
            "field_type": "text"
        },
        {
            "name": "[STEAM] Steam App ID",
            "description": "Steam App ID",
            "env_variable": "STEAM_APPID",
            "default_value": "2915550",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|in:2915550",
            "field_type": "text"
        },
        {
            "name": "[WINE] WINEDEBUG",
            "description": "",
            "env_variable": "WINEDEBUG",
            "default_value": "-all",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "[WINE] WINETRICKS_RUN",
            "description": "",
            "env_variable": "WINETRICKS_RUN",
            "default_value": "mono",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string",
            "field_type": "text"
        }
    ]
}